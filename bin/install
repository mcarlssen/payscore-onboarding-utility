#!/usr/bin/env ruby
require "fileutils"
APP_ROOT = File.expand_path("..", __dir__)

def system!(*args)
  system(*args, exception: true)
end

FileUtils.chdir APP_ROOT do
  puts "== One-touch install ==\n\n"
  system! "ruby bin/setup"
  puts "\n== Starting server ==\n"
  puts "Open http://localhost:3000 in your browser. Press Ctrl+C to stop.\n\n"
  system! "bundle exec rails server"
end
